<div class="min-h-screen bg-white">
  <section class="w-full border-b border-gray-200">
    <div class="px-6 pt-4 md:pt-8 pb-4">
      <h1 class="text-[32px] font-normal mb-6 md:mb-8 mt-10">Shop</h1>

      <div class="flex flex-col md:flex-row md:items-center md:justify-between pb-0 gap-6 md:gap-0">
        <div class="flex flex-wrap gap-3">
          @for (category of categories; track category.id) {
            <button
              (click)="selectCategory(category.id)"
              [class.bg-black]="selectedCategory() === category.id"
              [class.text-white]="selectedCategory() === category.id"
              [class.bg-white]="selectedCategory() !== category.id"
              [class.text-black]="selectedCategory() !== category.id"
              class="px-6 py-2 rounded-full border border-gray-300 text-[14px] font-medium 
                   transition-colors duration-400"
            >
              {{ category.label }}
            </button>
          }
        </div>

        <div class="flex justify-around md:justify-end md:gap-20 md:mr-15 w-full md:w-auto mt-4 md:mt-0 relative">
          <div class="relative sort-dropdown-container">
            <button 
              (click)="toggleSortDropdown()"
              class="text-[16px] font-medium hover:opacity-60 transition-opacity flex items-center gap-1">
              Sort 
              <i 
                [class.rotate-180]="isSortDropdownOpen()"
                class="ph ph-caret-down text-[20px] transition-transform duration-300">
              </i>
            </button>
            
            @if (isSortDropdownOpen()) {
              <div class="hidden md:block absolute top-full mt-2 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-50 min-w-[200px]">
                <ul class="py-2">
                  @for (option of sortOptions; track option.id) {
                    <li>
                      <button
                        (click)="selectSort(option.id)"
                        [class.text-black]="selectedSort() === option.id"
                        [class.text-gray-400]="selectedSort() !== option.id"
                        class="w-full text-left px-4 py-3 text-[14px] hover:bg-gray-50 transition-colors"
                      >
                        {{ option.label }}
                      </button>
                    </li>
                  }
                </ul>
              </div>
            }
          </div>

          <button class="text-[16px] font-medium hover:opacity-60 transition-opacity">
            Filter
          </button>
        </div>
      </div>
    </div>
  </section>

  <section class="px-6 md:px-20 py-6 md:py-8 mt-6 md:mt-14">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 w-full">
      @for (product of products(); track product.id) {
        <app-product-card [product]="product" />
      }
    </div>

    @if (products().length === 0) {
      <div class="text-center py-20">
        <p class="text-gray-500 text-lg">No products found</p>
      </div>
    }
  </section>


  @if (isSortDropdownOpen()) {
    <div 
      class="md:hidden fixed inset-0 bg-black/50 backdrop-blur-md z-50"
      (click)="toggleSortDropdown()"
    ></div>

    <div class="md:hidden fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl z-50 animate-slide-up">
      <div class="flex items-center justify-between p-6 border-b border-gray-200">
        <h3 class="text-[18px] font-medium">Sort</h3>
        <button 
          (click)="toggleSortDropdown()"
          class="w-8 h-8 flex items-center justify-center"
          aria-label="Close"
        >
          <i class="ph ph-x text-[24px] "></i>
        </button>
      </div>

      <div class="p-6 space-y-1">
        @for (option of sortOptions; track option.id) {
          <button
            (click)="selectSort(option.id)"
            [class.text-black]="selectedSort() === option.id"
            [class.text-gray-400]="selectedSort() !== option.id"
            class="w-full text-left py-4 text-[16px] transition-colors"
          >
            {{ option.label }}
          </button>
        }
      </div>
    </div>
  }
</div>